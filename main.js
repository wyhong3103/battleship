(()=>{"use strict";function t(t,e=""){const n=document.createElement(t);return""!==e&&n.classList.add(e),n}function e(t){return document.querySelector(t)}function n(t){return document.querySelectorAll(t)}function o(t,o=!1){if(o){const e=n(t);for(let t=0;t<e.length;t++){const n=e[t],o=e[t].cloneNode(!0);n.parentNode.replaceChild(o,n)}}else{const n=e(t),o=n,i=n.cloneNode(!0);o.parentNode.replaceChild(i,o)}}const i=(t,e,n)=>{let o=0,i=e,r=n;return{hit:function(){o+=1},isSunk:function(){return o===t},shipLength:t,setHead:function(t){i=t},getHead:function(){return i},setHor:function(t){r=t},getHor:function(){return r}}},r=()=>{const t=(()=>{const t=[],e=[];let n=[],o=0;function r(e,n){return e<0||n<0||e>=t.length||n>=t.length}function a(e,n,o,i){if(r(e,n)||r(o,i))return!0;if(o<e||i<n)return!0;const a=[-1,-1,0,1,1,1,0,-1],l=[0,1,1,1,0,-1,-1,-1];if(e===o)for(let o=n;o<=i;o++)for(let n=0;n<8;n++)if(!(o+l[n]<0||e+a[n]<0||o+l[n]>=10||e+a[n]>=10)&&-1!==t[e+a[n]][o+l[n]])return!0;if(n===i)for(let i=e;i<=o;i++)for(let e=0;e<8;e++)if(!(n+l[e]<0||i+a[e]<0||n+l[e]>=10||i+a[e]>=10)&&-1!==t[i+a[e]][n+l[e]])return!0;return!1}function l(e,n,o,i){let r=!0;if(e===o)for(let o=n;o<=i;o++)-1!==t[e][o]&&(r=!1);else for(let i=e;i<=o;i++)-1!==t[i][n]&&(r=!1);return r}function d(t,e,n,o){return!(!o||a(e,n,e,n+t-1)||!l(e,n,e,n+t-1))||!(o||a(e,n,e+t-1,n)||!l(e,n,e+t-1,n))}return function(){for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(-1);t.push(e)}for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(-1);e.push(t)}}(),{placeShip:function(e,r,a,l,c=-1){const s=-1===c?n.length:c;if(l&&d(e,r,a,l)){for(let n=a;n<a+e;n++)t[r][n]=s;-1===c?n.push(i(e,[r,a],l)):(n[c].setHead([r,a]),n[c].setHor(l))}else{if(l||!d(e,r,a,l))return!1;for(let n=r;n<r+e;n++)t[n][a]=s;-1===c?n.push(i(e,[r,a],l)):(n[c].setHead([r,a]),n[c].setHor(l))}return-1===c&&(o+=1),!0},receiveAttack:function(i,a){return r(i,a)||-1!==e[i][a]?-1:(e[i][a]=1,-1!==t[i][a]?(n[t[i][a]].hit(),n[t[i][a]].isSunk()?(o-=1,3):2):1)},isGameOver:function(){return 0===o},isValidPlacement:d,shipAt:function(e,n){return t[e][n]},getShip:function(t){return t>=n.length?-1:n[t]},unplaceShip:function(e){const o=n[e].getHead()[0],i=n[e].getHead()[1],r=n[e].shipLength;if(n[e].getHor())for(let e=i;e<i+r;e++)t[o][e]=-1;else for(let e=o;e<o+r;e++)t[e][i]=-1},newShip:function(t){return n.push(i(t,-1,-1)),o+=1,n[n.length-1]},restartBoard:function(){for(let t=0;t<10;t++)for(let n=0;n<10;n++)e[t][n]=-1;o=n.length;const t=[];for(let e=0;e<n.length;e++)t.push(i(n[e].shipLength,n[e].getHead(),n[e].getHor()));n=t}}})();let e=0,n=[],o=[[-1,-1],[-1,-1]];const r=[],a=[];return function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++)n.push([t,e]);n=function(t){let e,n=t.length;for(;0!==n;)e=Math.floor(Math.random()*n),n-=1,[t[n],t[e]]=[t[e],t[n]];return t}(n)}(),function(){for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(-1);a.push(t)}}(),{gameboard:t,randomAttack:function(t){let i=[-1,-1,-1];if(-1!==o[0][0]&&-1!==o[0][1]){if(o[0][0]===o[1][0]&&o[0][1]===o[1][1]){for(;-1===i[2];){const e=r.shift();i=[e[0],e[1],-1],i[2]=t.receiveAttack(e[0],e[1])}if(2===i[2]){for(;r.length>0;)r.pop();i[0]===o[0][0]?i[1]>o[0][1]?o[1]=[i[0],i[1]]:o[0]=[i[0],i[1]]:i[1]===o[0][1]&&(i[0]>o[0][0]?o[1]=[i[0],i[1]]:o[0]=[i[0],i[1]])}}else if(o[0][0]!==o[1][0]||o[0][1]!==o[1][1])if(o[0][0]===o[1][0]){for(i=[o[0][0],o[0][1],-1];i[1]>=0&&-1===i[2]&&(i[1]-=1,i[1]>=0&&-1===a[i[0]][i[1]]);)i[2]=t.receiveAttack(i[0],i[1]);if(i[2]>=2&&(o[0][1]-=1),-1===i[2]){for(i=[o[1][0],o[1][1],-1];i[1]<10&&-1===i[2]&&(i[1]+=1,i[1]<10&&-1===a[i[0]][i[1]]);)i[2]=t.receiveAttack(i[0],i[1]);i[2]>=2&&(o[1][1]+=1)}}else if(o[0][1]===o[1][1]){for(i=[o[0][0],o[0][1],-1];i[1]>=0&&-1===i[2]&&(i[0]-=1,i[0]>=0&&-1===a[i[0]][i[1]]);)i[2]=t.receiveAttack(i[0],i[1]);if(i[2]>=2&&(o[0][0]-=1),-1===i[2]){for(i=[o[1][0],o[1][1],-1];i[0]<10&&-1===i[2]&&(i[0]+=1,i[0]<10&&-1===a[i[0]][i[1]]);)i[2]=t.receiveAttack(i[0],i[1]);i[2]>=2&&(o[1][0]+=1)}}}else for(;-1===i[2];){if(i=[n[e][0],n[e][1],-1],-1===a[i[0]][i[1]]&&(i[2]=t.receiveAttack(i[0],i[1]),2===i[2])){o=[[i[0],i[1]],[i[0],i[1]]];const[t,e]=[i[0],i[1]],n=[1,-1,0,0],l=[0,0,1,-1];for(let o=0;o<4;o++)t+n[o]<0||t+n[o]>=10||e+l[o]<0||e+l[o]>=10||1===a[t+n[o]][e+l[o]]||r.push([t+n[o],e+l[o]])}e+=1}return 3===i[2]&&(o=[[-1,-1],[-1,-1]],function(t,e,n){const o=[-1,-1,0,1,1,1,0,-1],i=[0,1,1,1,0,-1,-1,-1],r=n.getShip(n.shipAt(t,e)),[l,d]=r.getHead();if(r.getHor())for(let t=d;t<d+r.shipLength;t++)for(let e=0;e<8;e++)l+o[e]<0||t+i[e]<0||l+o[e]>=10||t+i[e]>=10||(a[l+o[e]][t+i[e]]=1);else for(let t=l;t<l+r.shipLength;t++)for(let e=0;e<8;e++)t+o[e]<0||d+i[e]<0||t+o[e]>=10||d+i[e]>=10||(a[t+o[e]][d+i[e]]=1)}(i[0],i[1],t)),a[i[0]][i[1]]=1,i},generateRandomShip:function(){const e=[2,3,3,4,5];for(;e.length>0;){const n=e[e.length-1],[o,i]=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],r=1===Math.floor(2*Math.random());t.isValidPlacement(n,o,i,r)&&(t.placeShip(n,o,i,r),e.pop())}}}},a=(()=>{const o=e("#content");return{prepPage:function(){o.innerHTML="";const e=t("div","main"),n=t("h1","title");n.textContent="BATTLESHIP";const i=t("div","prep-container"),r=t("div","prep-left"),a=t("div","grid");for(let e=0;e<100;e++){const e=t("div","cell");a.appendChild(e)}r.appendChild(a);const l=t("div","prep-right"),d=t("div","remaining");for(let e=0;e<20;e++){const e=t("div","cell-remain");d.appendChild(e)}const c=t("button","ready-btn");c.textContent="READY",l.appendChild(d),l.appendChild(c),i.appendChild(r),i.appendChild(l);const s=t("div","footer"),p=t("p");p.textContent="Made By";const h=t("a");h.setAttribute("href","https://github.com/wyhong3103");const g=t("img","github-svg");g.src="./assets/github.svg";const f=t("p");f.textContent="wyhong3103",h.appendChild(g),h.appendChild(f),s.appendChild(p),s.appendChild(h),e.appendChild(n),e.appendChild(i),e.appendChild(s),o.appendChild(e)},paintStock:function(o){!function(){const n=e(".remaining");n.innerHTML="";for(let e=0;e<20;e++){const e=t("div","cell-remain");n.appendChild(e)}}();const i=n(".remaining .cell-remain");let r=0,a=0;for(let t=0;t<o.length;t++){a+o[t]>=10&&(r+=1,a=0);for(let e=a;e<a+o[t];e++)i[10*r+e].classList.add(`block${o[t]}`),e===a&&i[10*r+e].classList.add("cell-remain-left");a+=o[t]}},paintBoard:function(o,i=-1){!function(n=-1){let o="";o=1===n?".player-grid":2===n?".opp-grid":".grid";const i=e(o);i.innerHTML="";for(let e=0;e<100;e++){const e=t("div","cell");i.appendChild(e)}}(i);let r="";r=1===i?".player-grid":2===i?".opp-grid":".grid";const a=n(`${r} .cell`);for(let t=0;t<10;t++)for(let e=0;e<10;e++)-1!==o.shipAt(t,e)&&a[10*t+e].classList.add(`block${o.getShip(o.shipAt(t,e)).shipLength}`)},paintCurrent:function(o){!function(){const n=e(".current");n.innerHTML="";for(let e=0;e<6;e++){const e=t("div","cell-current");n.appendChild(e)}}();const i=n(".cell-current");for(let t=0;t<o;t++)i[t].classList.add(`block${o}`)},allowStart:function(){const n=e(".prep-right");n.innerHTML="";const o=t("button","start-btn");o.textContent="START",n.appendChild(o)},addCurrent:function(){const n=e(".prep-right");n.removeChild(n.lastChild);const o=t("div","current-container"),i=t("h3","current-text");i.textContent="CURRENT SHIP";const r=t("div","current");for(let e=0;e<6;e++){const e=t("div","cell-current");r.appendChild(e)}const a=t("button","done-btn"),l=t("img","done-svg");l.src="./assets/tick.svg",a.appendChild(l),o.appendChild(i),o.appendChild(r),o.appendChild(a),n.appendChild(o)},battlePage:function(){o.innerHTML="";const e=t("div","main"),n=t("h1","title");n.textContent="BATTLESHIP";const i=t("div","grid-container"),r=t("div","player-grid");for(let e=0;e<100;e++){const e=t("div","cell");r.appendChild(e)}const a=t("div","opp-grid");for(let e=0;e<100;e++){const e=t("div","cell");a.appendChild(e)}i.appendChild(r),i.appendChild(a);const l=t("div","game-btn-container"),d=t("button","restart-btn"),c=t("button","exit-btn");d.textContent="RESTART",c.textContent="EXIT",l.appendChild(d),l.appendChild(c);const s=t("div","footer"),p=t("p");p.textContent="Made By";const h=t("a");h.setAttribute("href","https://github.com/wyhong3103");const g=t("img","github-svg");g.src="./assets/github.svg";const f=t("p");f.textContent="wyhong3103",h.appendChild(g),h.appendChild(f),s.appendChild(p),s.appendChild(h),e.appendChild(n),e.appendChild(i),e.appendChild(l),e.appendChild(s),o.appendChild(e)},paintHit:function(t,e,o,i=-1){let r="";r=1===i?".player-grid":2===i?".opp-grid":".grid";const a=n(`${r} .cell`);1===o?a[e].textContent="Â·":o>=2&&(a[e].textContent="X"),3===o&&function(t,e,o,i=-1){let r="";r=1===i?".player-grid":2===i?".opp-grid":".grid";const a=n(`${r} .cell`);if(o)for(let n=0;n<t;n++)a[e+n].classList.add(`block${t}`);else for(let n=0;n<t;n++)a[e+10*n].classList.add(`block${t}`)}(t.shipLength,10*t.getHead()[0]+t.getHead()[1],t.getHor(),i)},displayMsg:function(e){!function(){const e=t("div","hide-bg");o.appendChild(e)}();const n=t("div","msg-container"),i=t("div","msg-box"),r=t("h3","msg");r.textContent=e;const a=t("button","ok-btn");a.textContent="OK!",i.appendChild(r),i.appendChild(a),n.appendChild(i),o.appendChild(n)}}})(),l=a,d=(()=>{let t=null,i=null,a=[],d=-1,c=0,s=null;function p(){const e=n(".cell");for(let n=0;n<e.length;n++)e[n].addEventListener("mouseover",(()=>{const o=t.gameboard.getShip(d);if(-1===t.gameboard.shipAt(Math.floor(n/10),n%10)&&t.gameboard.isValidPlacement(o.shipLength,Math.floor(n/10),n%10,o.getHor()))if(t.gameboard.placeShip(o.shipLength,Math.floor(n/10),n%10,o.getHor(),d),o.getHor())for(let t=0;t<o.shipLength;t++)e[n+t].classList.add(`block${o.shipLength}`);else for(let t=0;t<o.shipLength;t++)e[n+10*t].classList.add(`block${o.shipLength}`)})),e[n].addEventListener("mouseout",(()=>{const o=t.gameboard.getShip(d);if(t.gameboard.shipAt(Math.floor(n/10),n%10)===d)if(t.gameboard.unplaceShip(d),o.getHor())for(let t=0;t<o.shipLength;t++)e[n+t].classList.remove(`block${o.shipLength}`);else for(let t=0;t<o.shipLength;t++)e[n+10*t].classList.remove(`block${o.shipLength}`)})),e[n].addEventListener("click",(()=>{t.gameboard.shipAt(Math.floor(n/10),n%10)===d&&(d=-1,l.paintBoard(t.gameboard),h())}))}function h(){const e=n(".cell");for(let n=0;n<e.length;n++)e[n].addEventListener("click",(()=>{c+=1,1===c?s=setTimeout((()=>{-1!==t.gameboard.shipAt(Math.floor(n/10),n%10)&&(d=t.gameboard.shipAt(Math.floor(n/10),n%10),t.gameboard.unplaceShip(t.gameboard.shipAt(Math.floor(n/10),n%10)),l.paintBoard(t.gameboard),p()),c=0}),200):(clearTimeout(s),(()=>{if(-1!==t.gameboard.shipAt(Math.floor(n/10),n%10)){const e=t.gameboard.shipAt(Math.floor(n/10),n%10),o=t.gameboard.getShip(e);t.gameboard.unplaceShip(e),t.gameboard.isValidPlacement(o.shipLength,o.getHead()[0],o.getHead()[1],!o.getHor())?(t.gameboard.placeShip(o.shipLength,o.getHead()[0],o.getHead()[1],!o.getHor(),e),l.paintBoard(t.gameboard),h()):t.gameboard.placeShip(o.shipLength,o.getHead()[0],o.getHead()[1],o.getHor(),e)}})(),c=0)}))}function g(){e(".start-btn").addEventListener("click",(()=>{l.battlePage(),i.generateRandomShip(),l.paintBoard(t.gameboard,1),v(),L()}))}function f(){t=r(),i=r(),a=[2,3,3,4,5],l.prepPage(),l.paintStock(a),l.paintBoard(t.gameboard),e(".ready-btn").addEventListener("click",(()=>{l.addCurrent(),e(".done-btn").addEventListener("click",(()=>{if(-1===d&&a.length>0){d=5-a.length;const e=a[a.length-1];t.gameboard.newShip(e),a.pop(),l.paintCurrent(e),l.paintStock(a),o(".grid .cell",!0),p()}else 0===a.length&&(l.allowStart(),g())})),d=0,t.gameboard.newShip(5),a.pop(),l.paintCurrent(5),l.paintStock(a),p()}))}let u=0;function m(){e(".ok-btn").addEventListener("click",(()=>{const t=e("#content");t.removeChild(t.lastChild),t.removeChild(t.lastChild)}))}function b(t){o(".player-grid .cell",!0),o(".opp-grid .cell",!0),l.displayMsg((1===t?"Player":"AI")+" have won the game! Press restart if you wish to restart the game with current setting. Otherwise, exit."),m()}function C(){const e=i.randomAttack(t.gameboard);1===e[2]?l.paintHit(-1,10*e[0]+e[1],e[2],1):e[2]>=2&&l.paintHit(t.gameboard.getShip(t.gameboard.shipAt(e[0],e[1])),10*e[0]+e[1],e[2],1),u=0,t.gameboard.isGameOver()&&b(0)}function v(){const t=n(".opp-grid .cell");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{if(0===u){const t=i.gameboard.receiveAttack(Math.floor(e/10),e%10);-1!==t&&(1===t?l.paintHit(-1,e,t,2):t>=2&&l.paintHit(i.gameboard.getShip(i.gameboard.shipAt(Math.floor(e/10),e%10)),e,t,2),u=1,i.gameboard.isGameOver()&&b(1),C())}}))}function L(){e(".restart-btn").addEventListener("click",(()=>{t.gameboard.restartBoard(),i=r(),l.battlePage(),i.generateRandomShip(),l.paintBoard(t.gameboard,1),v(),L()})),e(".exit-btn").addEventListener("click",(()=>{f()}))}return{init:function(){f(),l.displayMsg("Welcome to BATTLESHIP! Place your ships and ready for war! Click the ship one time to relocate it! Double click it to rotate it!"),m()}}})();d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0IsR0FpUm5CbkIsRUFBV3lCLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcclxuICAgIGxldCBjdXJyZW50SW5kZXggPSBhcnJheS5sZW5ndGg7IGxldCAgcmFuZG9tSW5kZXg7XHJcbiAgXHJcbiAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZS5cclxuICAgIHdoaWxlIChjdXJyZW50SW5kZXggIT09IDApIHtcclxuICBcclxuICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50LlxyXG4gICAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleCk7XHJcbiAgICAgIGN1cnJlbnRJbmRleC09MTtcclxuICBcclxuICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cclxuICAgICAgW2FycmF5W2N1cnJlbnRJbmRleF0sIGFycmF5W3JhbmRvbUluZGV4XV0gPSBbXHJcbiAgICAgICAgYXJyYXlbcmFuZG9tSW5kZXhdLCBhcnJheVtjdXJyZW50SW5kZXhdXTtcclxuICAgIH1cclxuICBcclxuICAgIHJldHVybiBhcnJheTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ29tcCh0eXBlLCBjbHMgPSBcIlwiKXtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgaWYgKGNscyAhPT0gXCJcIil7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNscyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VsZWN0Q29tcChzZWxlY3Rvcil7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdENvbXBzKHNlbGVjdG9yKXtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJFdnRMcyhzZWxlY3RvciwgZ3JvdXAgPSBmYWxzZSl7XHJcbiAgICBpZiAoZ3JvdXApe1xyXG4gICAgICAgIGNvbnN0IGNvbXBzID0gc2VsZWN0Q29tcHMoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb21wcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZENvbXAgPSBjb21wc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgbmV3Q29tcCA9IGNvbXBzW2ldLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgb2xkQ29tcC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdDb21wLCBvbGRDb21wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgY29uc3QgY29tcCA9IHNlbGVjdENvbXAoc2VsZWN0b3IpO1xyXG4gICAgICAgIGNvbnN0IG9sZENvbXAgPSBjb21wO1xyXG4gICAgICAgIGNvbnN0IG5ld0NvbXAgPSBjb21wLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICBvbGRDb21wLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NvbXAsIG9sZENvbXApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IHtcclxuICAgIHNodWZmbGUsXHJcbiAgICBjcmVhdGVDb21wLFxyXG4gICAgc2VsZWN0Q29tcCxcclxuICAgIHNlbGVjdENvbXBzLFxyXG4gICAgY2xlYXJFdnRMc1xyXG59OyIsImNvbnN0IFNoaXAgPSAoKHNoaXBMZW5ndGgsIGhlYWQsIGlzSG9yaXpvbnRhbCkgPT4ge1xyXG5cclxuICAgIGxldCB0b3RhbEhpdHMgPSAwO1xyXG4gICAgLy8gc2hpcEhlYWQgaXMgYW4gYXJyYXkgb2YgW3gseV1cclxuICAgIGxldCBzaGlwSGVhZCA9IGhlYWQ7XHJcbiAgICBsZXQgaXNIb3IgPSBpc0hvcml6b250YWw7XHJcblxyXG4gICAgZnVuY3Rpb24gaGl0KCl7XHJcbiAgICAgICAgdG90YWxIaXRzICs9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNTdW5rKCl7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsSGl0cyA9PT0gc2hpcExlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRIZWFkKG5ld0hlYWQpe1xyXG4gICAgICAgIHNoaXBIZWFkID0gbmV3SGVhZDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRIZWFkKCl7XHJcbiAgICAgICAgcmV0dXJuIHNoaXBIZWFkXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0SG9yKGlzSG9yaSl7XHJcbiAgICAgICAgaXNIb3IgPSBpc0hvcmk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SG9yKCl7XHJcbiAgICAgICAgcmV0dXJuIGlzSG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybntcclxuICAgICAgICBoaXQsXHJcbiAgICAgICAgaXNTdW5rLFxyXG4gICAgICAgIHNoaXBMZW5ndGgsXHJcbiAgICAgICAgc2V0SGVhZCxcclxuICAgICAgICBnZXRIZWFkLFxyXG4gICAgICAgIHNldEhvcixcclxuICAgICAgICBnZXRIb3JcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaGlwOyIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmltcG9ydCB7IHNodWZmbGUgfSBmcm9tIFwiLi91dGlsXCI7XHJcblxyXG5jb25zdCBQbGF5ZXIgPSAoKCkgPT4ge1xyXG4gICAgY29uc3QgZ2FtZWJvYXJkID0gR2FtZWJvYXJkKCk7ICAgIFxyXG4gICAgbGV0IGN1cnJlbnRBdHRhY2sgPSAwO1xyXG4gICAgbGV0IGF0dGFja09yZGVyID0gW107XHJcbiAgICAvLyAtMSA9IHVua25vd24sIDEgPSBpbXBvc3NpYmxlIHRvIGhhdmUgc2hpcFxyXG4gICAgbGV0IGZvdW5kID0gW1stMSwgLTFdLCBbLTEsIC0xXV07XHJcbiAgICBjb25zdCBxdWV1ZSA9IFtdO1xyXG4gICAgY29uc3QgaGl0R3JpZCA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQXR0YWNrT3JkZXIoKXtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGF0dGFja09yZGVyLnB1c2goW2ksIGpdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhdHRhY2tPcmRlciA9IHNodWZmbGUoYXR0YWNrT3JkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSGl0R3JpZCgpe1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICB0ZW1wLnB1c2goLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhpdEdyaWQucHVzaCh0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY292ZXJJbXBvc3NpYmxlKHJvd0F0LCBjb2xBdCwgb3BwQm9hcmQpe1xyXG4gICAgICAgIGNvbnN0IGRyID0gWy0xLCAtMSwgMCwgMSwgMSwgMSwgMCwgLTFdO1xyXG4gICAgICAgIGNvbnN0IGRjID0gWzAsIDEsIDEsIDEsIDAsIC0xLCAtMSwgLTFdO1xyXG4gICAgICAgIGNvbnN0IHNoaXAgPSBvcHBCb2FyZC5nZXRTaGlwKG9wcEJvYXJkLnNoaXBBdChyb3dBdCwgY29sQXQpKTtcclxuICAgICAgICBjb25zdCBbcm93LGNvbF0gPSBzaGlwLmdldEhlYWQoKTtcclxuICAgICAgICBpZiAoc2hpcC5nZXRIb3IoKSl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IGNvbDsgaSA8IGNvbCtzaGlwLnNoaXBMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgODsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShyb3crZHJbal0gPCAwIHx8IGkrZGNbal0gPCAwIHx8IHJvdytkcltqXSA+PSAxMCB8fCBpK2RjW2pdID49IDEwKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdEdyaWRbcm93K2RyW2pdXVtpK2RjW2pdXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IHJvdzsgaSA8IHJvdytzaGlwLnNoaXBMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgODsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpK2RyW2pdIDwgMCB8fCBjb2wrZGNbal0gPCAwIHx8IGkrZHJbal0gPj0gMTAgfHwgY29sK2RjW2pdID49IDEwKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdEdyaWRbaStkcltqXV1bY29sK2RjW2pdXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhbmRvbUF0dGFjayhvcHBCb2FyZCl7XHJcbiAgICAgICAgbGV0IHJlcyA9IFstMSwgLTEsIC0xXTtcclxuICAgICAgICBpZiAoZm91bmRbMF1bMF0gIT09IC0xICYmIGZvdW5kWzBdWzFdICE9PSAtMSl7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgZm91bmQgb25lIHBvaW50XHJcbiAgICAgICAgICAgIGlmIChmb3VuZFswXVswXSA9PT0gZm91bmRbMV1bMF0gJiYgZm91bmRbMF1bMV0gPT09IGZvdW5kWzFdWzFdKXtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZXNbMl0gPT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0F0dGFjayA9IHF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzID0gW3RvQXR0YWNrWzBdLCB0b0F0dGFja1sxXSwgLTFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc1syXSA9IChvcHBCb2FyZC5yZWNlaXZlQXR0YWNrKHRvQXR0YWNrWzBdLCB0b0F0dGFja1sxXSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc1syXSA9PT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHF1ZXVlLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhbWUgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1swXSA9PT0gZm91bmRbMF1bMF0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzFdID4gZm91bmRbMF1bMV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRbMV0gPSBbcmVzWzBdLCByZXNbMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kWzBdID0gW3Jlc1swXSwgcmVzWzFdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc1sxXSA9PT0gZm91bmRbMF1bMV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzBdID4gZm91bmRbMF1bMF0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRbMV0gPSBbcmVzWzBdLCByZXNbMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kWzBdID0gW3Jlc1swXSwgcmVzWzFdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2UgaWYgKCEoZm91bmRbMF1bMF0gPT09IGZvdW5kWzFdWzBdICYmIGZvdW5kWzBdWzFdID09PSBmb3VuZFsxXVsxXSkpe1xyXG4gICAgICAgICAgICAgICAgLy8gRm91bmQgZGlmZmVyZW50IHBvaW50cyEgRGV0ZXJtaW5lZCB0aGUgZGlyZWN0aW9uIVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNhbWUgcm93XHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRbMF1bMF0gPT09IGZvdW5kWzFdWzBdKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgbGVmdCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRbMF1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kWzBdWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAtMVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVzWzFdID49IDAgJiYgcmVzWzJdID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1sxXSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzFdID49IDAgJiYgaGl0R3JpZFtyZXNbMF1dW3Jlc1sxXV0gPT09IC0xKSByZXNbMl0gPSBvcHBCb2FyZC5yZWNlaXZlQXR0YWNrKHJlc1swXSxyZXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCBhbm90aGVyIHBhcnQgbW92ZSBwb2ludGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1syXSA+PSAyKSBmb3VuZFswXVsxXSAtPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzJdID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFsxXVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kWzFdWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVzWzFdIDwgMTAgJiYgcmVzWzJdID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNbMV0gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNbMV0gPCAxMCAmJiBoaXRHcmlkW3Jlc1swXV1bcmVzWzFdXSA9PT0gLTEpIHJlc1syXSA9IG9wcEJvYXJkLnJlY2VpdmVBdHRhY2socmVzWzBdLHJlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNbMl0gPj0gMikgZm91bmRbMV1bMV0gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoZm91bmRbMF1bMV0gPT09IGZvdW5kWzFdWzFdKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgbGVmdCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRbMF1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kWzBdWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAtMVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVzWzFdID49IDAgJiYgcmVzWzJdID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1swXSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzBdID49IDAgJiYgaGl0R3JpZFtyZXNbMF1dW3Jlc1sxXV0gPT09IC0xKSByZXNbMl0gPSBvcHBCb2FyZC5yZWNlaXZlQXR0YWNrKHJlc1swXSxyZXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW5vdGhlciBwYXJ0IG1vdmUgcG9pbnRlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNbMl0gPj0gMikgZm91bmRbMF1bMF0gLT0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1syXSA9PT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRbMV1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFsxXVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlc1swXSA8IDEwICYmIHJlc1syXSA9PT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzWzBdICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzBdIDwgMTAgJiYgaGl0R3JpZFtyZXNbMF1dW3Jlc1sxXV0gPT09IC0xKSByZXNbMl0gPSBvcHBCb2FyZC5yZWNlaXZlQXR0YWNrKHJlc1swXSxyZXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWzJdID49IDIpIGZvdW5kWzFdWzBdICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZXNbMl0gPT09IC0xKXtcclxuICAgICAgICAgICAgICAgIHJlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2tPcmRlcltjdXJyZW50QXR0YWNrXVswXSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2tPcmRlcltjdXJyZW50QXR0YWNrXVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAtMVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgaWYgKGhpdEdyaWRbcmVzWzBdXVtyZXNbMV1dID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzWzJdID0gb3BwQm9hcmQucmVjZWl2ZUF0dGFjayhyZXNbMF0sIHJlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1syXSA9PT0gMil7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgZm91bmQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IFtbcmVzWzBdLHJlc1sxXV0sIFtyZXNbMF0sIHJlc1sxXV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbcm93LGNvbF0gPSBbcmVzWzBdLCByZXNbMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkciA9IFsxLCAtMSwgMCwgMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRjID0gWzAsIDAsIDEsIC0xXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSBjZWxscyBpbiA0IGRpcmVjdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyb3crZHJbaV0gPCAwIHx8IHJvdytkcltpXSA+PSAxMCB8fCBjb2wrZGNbaV0gPCAwIHx8IGNvbCtkY1tpXSA+PSAxMCB8fCBoaXRHcmlkW3JvdytkcltpXV1bY29sK2RjW2ldXSA9PT0gMSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goW3JvdytkcltpXSwgY29sK2RjW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgY3VycmVudEF0dGFjayArPSAxO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzWzJdID09PSAzKXtcclxuICAgICAgICAgICAgZm91bmQgPSBbWy0xLC0xXSwgWy0xLC0xXV07XHJcbiAgICAgICAgICAgIGNvdmVySW1wb3NzaWJsZShyZXNbMF0sIHJlc1sxXSwgb3BwQm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaGl0R3JpZFtyZXNbMF1dW3Jlc1sxXV0gPSAxO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TaGlwKCl7XHJcbiAgICAgICAgY29uc3Qgc2hpcHMgPSBbMiwgMywgMywgNCwgNV07XHJcbiAgICAgICAgd2hpbGUgKHNoaXBzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGVuZ3RoID0gc2hpcHNbc2hpcHMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICBjb25zdCBbcm93LGNvbF0gPSBbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCldICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAxO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5pc1ZhbGlkUGxhY2VtZW50KGN1cnJlbnRMZW5ndGgscm93LCBjb2wsIGlzSG9yaXpvbnRhbCkpe1xyXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChjdXJyZW50TGVuZ3RoLCByb3csIGNvbCwgaXNIb3Jpem9udGFsKTtcclxuICAgICAgICAgICAgICAgIHNoaXBzLnBvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQXR0YWNrT3JkZXIoKTtcclxuICAgIGdlbmVyYXRlSGl0R3JpZCgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2FtZWJvYXJkLFxyXG4gICAgICAgIHJhbmRvbUF0dGFjayxcclxuICAgICAgICBnZW5lcmF0ZVJhbmRvbVNoaXBcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7IiwiaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xyXG5cclxuY29uc3QgR2FtZWJvYXJkID0gKCgpID0+IHtcclxuICAgIGNvbnN0IGdyaWQgPSBbXTtcclxuICAgIGNvbnN0IGhpdEdyaWQgPSBbXTtcclxuICAgIGxldCBzaGlwcyA9IFtdO1xyXG4gICAgbGV0IHNoaXBzUmVtYWluaW5nID0gMDtcclxuXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUdyaWQoKXtcclxuICAgICAgICBjb25zdCBncmlkTGVuZ3RoID0gMTA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbXTtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGdyaWRMZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICB0ZW1wLnB1c2goLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdyaWQucHVzaCh0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbXTtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGdyaWRMZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICB0ZW1wLnB1c2goLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhpdEdyaWQucHVzaCh0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzdGFydEJvYXJkKCl7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBoaXRHcmlkW2ldW2pdID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2hpcHNSZW1haW5pbmcgPSBzaGlwcy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgbmV3U2hpcHMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBuZXdTaGlwcy5wdXNoKFNoaXAoc2hpcHNbaV0uc2hpcExlbmd0aCwgc2hpcHNbaV0uZ2V0SGVhZCgpLCBzaGlwc1tpXS5nZXRIb3IoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGlwcyA9IG5ld1NoaXBzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzSW52YWxpZENvb3JkKHJvdywgY29sKXtcclxuICAgICAgICBpZiAocm93IDwgMCB8fCBjb2wgPCAwIHx8IHJvdyA+PSBncmlkLmxlbmd0aCB8fCBjb2wgPj0gZ3JpZC5sZW5ndGgpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0ludmFsaWRTaGlwKGZyb21Sb3csIGZyb21Db2wsIHRvUm93LCB0b0NvbCl7XHJcbiAgICAgICAgLy8gSWYgdGVzdGluZyBhIHNpbmdsZSBjb29yZGluYXRlLCB3ZSBvbmx5IGNoZWNrIGZyb21Sb3cgYW5kIGZyb21Db2xcclxuICAgICAgICBpZiAoaXNJbnZhbGlkQ29vcmQoZnJvbVJvdyxmcm9tQ29sKSB8fCBpc0ludmFsaWRDb29yZCh0b1JvdywgdG9Db2wpKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gVGVzdGluZyBib3RoIGNvb3JkaW50ZXMsIG1ha2Ugc3VyZSBmcm9tIGlzIGFsd2F5cyBzbWFsbGVyIHRoYW4gdG9cclxuICAgICAgICBpZiAodG9Sb3cgPCBmcm9tUm93IHx8IHRvQ29sIDwgZnJvbUNvbCkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyID0gWy0xLCAtMSwgMCwgMSwgMSwgMSwgMCwgLTFdO1xyXG4gICAgICAgIGNvbnN0IGRjID0gWzAsIDEsIDEsIDEsIDAsIC0xLCAtMSwgLTFdO1xyXG5cclxuICAgICAgICBpZiAoZnJvbVJvdyA9PT0gdG9Sb3cpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSBmcm9tQ29sOyBpIDw9IHRvQ29sOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaStkY1tqXSA8IDAgfHwgZnJvbVJvdytkcltqXSA8IDAgfHwgaStkY1tqXSA+PSAxMCB8fCBmcm9tUm93K2RyW2pdID49IDEwKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkW2Zyb21Sb3crZHJbal1dW2krZGNbal1dICE9PSAtMVxyXG4gICAgICAgICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbUNvbCA9PT0gdG9Db2wpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSBmcm9tUm93OyBpIDw9IHRvUm93OyBpKyspe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZnJvbUNvbCtkY1tqXSA8IDAgfHwgaStkcltqXSA8IDAgfHwgZnJvbUNvbCtkY1tqXSA+PSAxMCB8fCBpK2RyW2pdID49IDEwKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkW2krZHJbal1dW2Zyb21Db2wrZGNbal1dICE9PSAtMVxyXG4gICAgICAgICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5ld1NoaXAobGVuZ3RoKXtcclxuICAgICAgICBzaGlwcy5wdXNoKFNoaXAobGVuZ3RoLCAtMSwgLTEsdHJ1ZSkpO1xyXG4gICAgICAgIHNoaXBzUmVtYWluaW5nICs9IDE7XHJcbiAgICAgICAgcmV0dXJuIHNoaXBzW3NoaXBzLmxlbmd0aC0xXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTaGlwKGlkKXtcclxuICAgICAgICByZXR1cm4gKGlkID49IHNoaXBzLmxlbmd0aCA/IC0xIDogIHNoaXBzW2lkXSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaGlwQXQocm93LCBjb2wpe1xyXG4gICAgICAgIHJldHVybiBncmlkW3Jvd11bY29sXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0VtcHR5KGZyb21Sb3csIGZyb21Db2wsIHRvUm93LCB0b0NvbCl7XHJcbiAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZnJvbVJvdyA9PT0gdG9Sb3cpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSBmcm9tQ29sOyBpIDw9IHRvQ29sOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyaWRbZnJvbVJvd11baV0gIT09IC0xKSB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IGZyb21Sb3c7IGkgPD0gdG9Sb3c7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZFtpXVtmcm9tQ29sXSAhPT0gLTEpIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmFsaWRQbGFjZW1lbnQobGVuZ3RoLCByb3csIGNvbCwgaXNIb3Jpem9udGFsKXtcclxuICAgICAgICBpZiAoaXNIb3Jpem9udGFsICYmICFpc0ludmFsaWRTaGlwKHJvdywgY29sLCByb3csIGNvbCtsZW5ndGgtMSkgJiYgaXNFbXB0eShyb3csIGNvbCwgcm93LCBjb2wrbGVuZ3RoLTEpKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNIb3Jpem9udGFsICYmICFpc0ludmFsaWRTaGlwKHJvdywgY29sLCByb3crbGVuZ3RoLTEsIGNvbCkgJiYgaXNFbXB0eShyb3csIGNvbCwgcm93K2xlbmd0aC0xLCBjb2wpKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1bnBsYWNlU2hpcChpZCl7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gc2hpcHNbaWRdLmdldEhlYWQoKVswXTtcclxuICAgICAgICBjb25zdCBjb2wgPSBzaGlwc1tpZF0uZ2V0SGVhZCgpWzFdO1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHNoaXBzW2lkXS5zaGlwTGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHNoaXBzW2lkXS5nZXRIb3IoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IGNvbDsgaSA8IGNvbCtsZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBncmlkW3Jvd11baV0gPSAtMTtcclxuICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IHJvdzsgaSA8IHJvdytsZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBncmlkW2ldW2NvbF0gPSAtMTtcclxuICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBsYWNlU2hpcChsZW5ndGgsIHJvdywgY29sLCBpc0hvcml6b250YWwsIGlkID0gLTEpe1xyXG4gICAgICAgIGNvbnN0IHNoaXBJRCA9IChpZCA9PT0gLTEgPyBzaGlwcy5sZW5ndGggOiBpZCk7XHJcbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCAmJiBpc1ZhbGlkUGxhY2VtZW50KGxlbmd0aCwgcm93LCBjb2wsIGlzSG9yaXpvbnRhbCkpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSBjb2w7IGkgPCBjb2wrbGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgZ3JpZFtyb3ddW2ldID0gc2hpcElEO1xyXG4gICAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlkID09PSAtMSkgc2hpcHMucHVzaChTaGlwKGxlbmd0aCwgW3Jvdyxjb2xdLCBpc0hvcml6b250YWwpKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaGlwc1tpZF0uc2V0SGVhZChbcm93LGNvbF0pO1xyXG4gICAgICAgICAgICAgICAgc2hpcHNbaWRdLnNldEhvcihpc0hvcml6b250YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFpc0hvcml6b250YWwgJiYgaXNWYWxpZFBsYWNlbWVudChsZW5ndGgsIHJvdywgY29sLCBpc0hvcml6b250YWwpKXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gcm93OyBpIDwgcm93K2xlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGdyaWRbaV1bY29sXSA9IHNoaXBJRDtcclxuICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpZCA9PT0gLTEpIHNoaXBzLnB1c2goU2hpcChsZW5ndGgsIFtyb3csY29sXSwgaXNIb3Jpem9udGFsKSk7XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBzaGlwc1tpZF0uc2V0SGVhZChbcm93LGNvbF0pO1xyXG4gICAgICAgICAgICAgICAgc2hpcHNbaWRdLnNldEhvcihpc0hvcml6b250YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlkID09PSAtMSkgc2hpcHNSZW1haW5pbmcgKz0gMTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWNlaXZlQXR0YWNrKHJvdywgY29sKXtcclxuICAgICAgICAvLyBpbnZhbGlkIGhpdFxyXG4gICAgICAgIGlmIChpc0ludmFsaWRDb29yZChyb3csIGNvbCkgfHwgaGl0R3JpZFtyb3ddW2NvbF0gIT09IC0xKSByZXR1cm4gLTE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaGl0R3JpZFtyb3ddW2NvbF0gPSAxO1xyXG4gICAgICAgIGlmIChncmlkW3Jvd11bY29sXSAhPT0gLTEpe1xyXG4gICAgICAgICAgICBzaGlwc1tncmlkW3Jvd11bY29sXV0uaGl0KCk7XHJcbiAgICAgICAgICAgIGlmIChzaGlwc1tncmlkW3Jvd11bY29sXV0uaXNTdW5rKCkpe1xyXG4gICAgICAgICAgICAgICAgc2hpcHNSZW1haW5pbmcgLT0gMTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgc3VuayB0aGUgc2hpcFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGhpdCBhIHNoaXBcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiBoaXQgbm90aGluZ1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzR2FtZU92ZXIoKXtcclxuICAgICAgICByZXR1cm4gc2hpcHNSZW1haW5pbmcgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVHcmlkKCk7XHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgcGxhY2VTaGlwLFxyXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXHJcbiAgICAgICAgaXNHYW1lT3ZlcixcclxuICAgICAgICBpc1ZhbGlkUGxhY2VtZW50LFxyXG4gICAgICAgIHNoaXBBdCxcclxuICAgICAgICBnZXRTaGlwLFxyXG4gICAgICAgIHVucGxhY2VTaGlwLFxyXG4gICAgICAgIG5ld1NoaXAsXHJcbiAgICAgICAgcmVzdGFydEJvYXJkXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2FtZWJvYXJkOyIsImltcG9ydCB7IGNyZWF0ZUNvbXAsIHNlbGVjdENvbXAsIHNlbGVjdENvbXBzIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5cclxuY29uc3QgRGlzcGxheSA9ICgoKSA9PiB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gc2VsZWN0Q29tcChcIiNjb250ZW50XCIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVCZygpe1xyXG4gICAgICAgIGNvbnN0IGJnQ29udGFpbmVyID0gY3JlYXRlQ29tcChcImRpdlwiLCBcImhpZGUtYmdcIik7XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChiZ0NvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheU1zZyhtZXNzYWdlKXtcclxuICAgICAgICBoaWRlQmcoKTtcclxuICAgICAgICBjb25zdCBtc2dDb250YWluZXIgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwibXNnLWNvbnRhaW5lclwiKTtcclxuICAgICAgICBjb25zdCBtc2dCb3ggPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwibXNnLWJveFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgbXNnID0gY3JlYXRlQ29tcChcImgzXCIsIFwibXNnXCIpO1xyXG4gICAgICAgIG1zZy50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcblxyXG4gICAgICAgIGNvbnN0IG9rQnRuID0gY3JlYXRlQ29tcChcImJ1dHRvblwiLCBcIm9rLWJ0blwiKTtcclxuICAgICAgICBva0J0bi50ZXh0Q29udGVudCA9IFwiT0shXCI7XHJcbiAgICAgICAgbXNnQm94LmFwcGVuZENoaWxkKG1zZyk7XHJcbiAgICAgICAgbXNnQm94LmFwcGVuZENoaWxkKG9rQnRuKTtcclxuXHJcbiAgICAgICAgbXNnQ29udGFpbmVyLmFwcGVuZENoaWxkKG1zZ0JveCk7XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChtc2dDb250YWluZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFsbG93U3RhcnQoKXtcclxuICAgICAgICBjb25zdCBwcmVwUmlnaHQgPSBzZWxlY3RDb21wKFwiLnByZXAtcmlnaHRcIik7XHJcbiAgICAgICAgcHJlcFJpZ2h0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRCdG4gPSBjcmVhdGVDb21wKFwiYnV0dG9uXCIsIFwic3RhcnQtYnRuXCIpO1xyXG4gICAgICAgIHN0YXJ0QnRuLnRleHRDb250ZW50ID0gXCJTVEFSVFwiO1xyXG4gICAgICAgIHByZXBSaWdodC5hcHBlbmRDaGlsZChzdGFydEJ0bik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRHcmlkQ2VsbHMoZ3JpZE51bWJlciA9IC0xKXtcclxuICAgICAgICBsZXQgc2VsZWN0b3IgPSBcIlwiO1xyXG4gICAgICAgIGlmIChncmlkTnVtYmVyID09PSAxKSBzZWxlY3RvciA9IFwiLnBsYXllci1ncmlkXCI7XHJcbiAgICAgICAgZWxzZSBpZiAoZ3JpZE51bWJlciA9PT0gMikgc2VsZWN0b3IgPSBcIi5vcHAtZ3JpZFwiO1xyXG4gICAgICAgIGVsc2Ugc2VsZWN0b3IgPSBcIi5ncmlkXCI7XHJcbiAgICAgICAgY29uc3QgZ3JpZCA9IHNlbGVjdENvbXAoc2VsZWN0b3IpO1xyXG4gICAgICAgIGdyaWQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspe1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gY3JlYXRlQ29tcChcImRpdlwiLCBcImNlbGxcIik7XHJcbiAgICAgICAgICAgIGdyaWQuYXBwZW5kQ2hpbGQoY2VsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2V0U3RvY2tDZWxscygpe1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IChzZWxlY3RDb21wKFwiLnJlbWFpbmluZ1wiKSlcclxuICAgICAgICByZW1haW5pbmcuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMjA7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiY2VsbC1yZW1haW5cIik7XHJcbiAgICAgICAgICAgIHJlbWFpbmluZy5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRDdXJyZW50KCl7XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHNlbGVjdENvbXAoXCIuY3VycmVudFwiKTtcclxuICAgICAgICBjdXJyZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiY2VsbC1jdXJyZW50XCIpO1xyXG4gICAgICAgICAgICBjdXJyZW50LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYWludFN0b2NrKHJlbWFpbil7XHJcbiAgICAgICAgcmVzZXRTdG9ja0NlbGxzKCk7XHJcbiAgICAgICAgY29uc3QgY2VsbHMgPSBzZWxlY3RDb21wcyhcIi5yZW1haW5pbmcgLmNlbGwtcmVtYWluXCIpO1xyXG4gICAgICAgIGxldCByb3cgPSAwOyBsZXQgY29sID0gMDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVtYWluLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYgKGNvbCtyZW1haW5baV0gPj0gMTApIHtcclxuICAgICAgICAgICAgICAgIHJvdyArPSAxO1xyXG4gICAgICAgICAgICAgICAgY29sID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IobGV0IGogPSBjb2w7IGogPCBjb2wrcmVtYWluW2ldOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY2VsbHNbKHJvdyoxMCkgKyBqXS5jbGFzc0xpc3QuYWRkKGBibG9jayR7cmVtYWluW2ldfWApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGNvbCkgY2VsbHNbKHJvdyoxMCkgKyBqXS5jbGFzc0xpc3QuYWRkKFwiY2VsbC1yZW1haW4tbGVmdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2wgKz0gcmVtYWluW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdW5rU2hpcChsZW5ndGgsIGF0LCBpc0hvcml6b250YWwsIGdyaWQgPSAtMSl7XHJcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gXCJcIjtcclxuICAgICAgICBpZiAoZ3JpZCA9PT0gMSkgc2VsZWN0b3IgPSBcIi5wbGF5ZXItZ3JpZFwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGdyaWQgPT09IDIpIHNlbGVjdG9yID0gXCIub3BwLWdyaWRcIjtcclxuICAgICAgICBlbHNlIHNlbGVjdG9yID0gXCIuZ3JpZFwiO1xyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gc2VsZWN0Q29tcHMoYCR7c2VsZWN0b3J9IC5jZWxsYCk7XHJcblxyXG4gICAgICAgIGlmIChpc0hvcml6b250YWwpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY2VsbHNbYXQral0uY2xhc3NMaXN0LmFkZChgYmxvY2ske2xlbmd0aH1gKTtcclxuICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBsZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjZWxsc1thdCsoaioxMCldLmNsYXNzTGlzdC5hZGQoYGJsb2NrJHtsZW5ndGh9YCk7XHJcbiAgICAgICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcGFpbnRIaXQoc2hpcCwgYXQsIGhpdFR5cGUsIGdyaWQgPSAtMSl7XHJcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gXCJcIjtcclxuICAgICAgICBpZiAoZ3JpZCA9PT0gMSkgc2VsZWN0b3IgPSBcIi5wbGF5ZXItZ3JpZFwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGdyaWQgPT09IDIpIHNlbGVjdG9yID0gXCIub3BwLWdyaWRcIjtcclxuICAgICAgICBlbHNlIHNlbGVjdG9yID0gXCIuZ3JpZFwiO1xyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gc2VsZWN0Q29tcHMoYCR7c2VsZWN0b3J9IC5jZWxsYCk7XHJcblxyXG4gICAgICAgIGlmIChoaXRUeXBlID09PSAxKXtcclxuICAgICAgICAgICAgY2VsbHNbYXRdLnRleHRDb250ZW50ID0gXCLCt1wiO1xyXG4gICAgICAgIH1lbHNlIGlmIChoaXRUeXBlID49IDIpe1xyXG4gICAgICAgICAgICBjZWxsc1thdF0udGV4dENvbnRlbnQgPSBcIlhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhpdFR5cGUgPT09IDMpe1xyXG4gICAgICAgICAgICBzdW5rU2hpcChzaGlwLnNoaXBMZW5ndGgsIChzaGlwLmdldEhlYWQoKVswXSoxMCkgKyBzaGlwLmdldEhlYWQoKVsxXSwgc2hpcC5nZXRIb3IoKSwgZ3JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhaW50Q3VycmVudChsZW5ndGgpe1xyXG4gICAgICAgIHJlc2V0Q3VycmVudCgpO1xyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gc2VsZWN0Q29tcHMoXCIuY2VsbC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGNlbGxzW2ldLmNsYXNzTGlzdC5hZGQoYGJsb2NrJHtsZW5ndGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhaW50Qm9hcmQoZ2FtZWJvYXJkLCBncmlkID0gLTEpe1xyXG4gICAgICAgIHJlc2V0R3JpZENlbGxzKGdyaWQpO1xyXG4gICAgICAgIGxldCBzZWxlY3RvciA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGdyaWQgPT09IDEpIHNlbGVjdG9yID0gXCIucGxheWVyLWdyaWRcIjtcclxuICAgICAgICBlbHNlIGlmIChncmlkID09PSAyKSBzZWxlY3RvciA9IFwiLm9wcC1ncmlkXCI7XHJcbiAgICAgICAgZWxzZSBzZWxlY3RvciA9IFwiLmdyaWRcIjtcclxuICAgICAgICBjb25zdCBjZWxscyA9IHNlbGVjdENvbXBzKGAke3NlbGVjdG9yfSAuY2VsbGApO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuc2hpcEF0KGksaikgIT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsc1soaSoxMCkral0uY2xhc3NMaXN0LmFkZChgYmxvY2ske2dhbWVib2FyZC5nZXRTaGlwKGdhbWVib2FyZC5zaGlwQXQoaSwgaikpLnNoaXBMZW5ndGh9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkQ3VycmVudCgpe1xyXG4gICAgICAgIGNvbnN0IHByZXBSaWdodCA9IHNlbGVjdENvbXAoXCIucHJlcC1yaWdodFwiKTtcclxuICAgICAgICBwcmVwUmlnaHQucmVtb3ZlQ2hpbGQocHJlcFJpZ2h0Lmxhc3RDaGlsZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXIgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiY3VycmVudC1jb250YWluZXJcIik7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSBjcmVhdGVDb21wKFwiaDNcIiwgXCJjdXJyZW50LXRleHRcIik7XHJcbiAgICAgICAgY3VycmVudFRleHQudGV4dENvbnRlbnQgPSBcIkNVUlJFTlQgU0hJUFwiO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gY3JlYXRlQ29tcChcImRpdlwiLCBcImN1cnJlbnRcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiY2VsbC1jdXJyZW50XCIpO1xyXG4gICAgICAgICAgICBjdXJyZW50LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZG9uZUJ0biA9IGNyZWF0ZUNvbXAoXCJidXR0b25cIiwgXCJkb25lLWJ0blwiKTtcclxuICAgICAgICBjb25zdCBkb25lSW1nID0gY3JlYXRlQ29tcChcImltZ1wiLCBcImRvbmUtc3ZnXCIpO1xyXG4gICAgICAgIGRvbmVJbWcuc3JjID0gXCIuL2Fzc2V0cy90aWNrLnN2Z1wiO1xyXG4gICAgICAgIGRvbmVCdG4uYXBwZW5kQ2hpbGQoZG9uZUltZyk7XHJcblxyXG4gICAgICAgIGN1cnJlbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoY3VycmVudFRleHQpO1xyXG4gICAgICAgIGN1cnJlbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoY3VycmVudCk7XHJcbiAgICAgICAgY3VycmVudENvbnRhaW5lci5hcHBlbmRDaGlsZChkb25lQnRuKTtcclxuICAgICAgICBwcmVwUmlnaHQuYXBwZW5kQ2hpbGQoY3VycmVudENvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIEluaXRpYWxpemUgcHJlcGFyYXRpb24gcGFnZVxyXG4gICAgZnVuY3Rpb24gcHJlcFBhZ2UoKXtcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgY29uc3QgbWFpbiA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJtYWluXCIpOyAgICBcclxuXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBjcmVhdGVDb21wKFwiaDFcIiwgXCJ0aXRsZVwiKTtcclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IFwiQkFUVExFU0hJUFwiO1xyXG5cclxuICAgICAgICBjb25zdCBwcmVwQ29udGFpbmVyID0gY3JlYXRlQ29tcChcImRpdlwiLCBcInByZXAtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNvbnN0IHByZXBMZWZ0ID0gY3JlYXRlQ29tcChcImRpdlwiLCBcInByZXAtbGVmdFwiKTtcclxuICAgICAgICBjb25zdCBncmlkID0gY3JlYXRlQ29tcChcImRpdlwiLCBcImdyaWRcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJjZWxsXCIpO1xyXG4gICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByZXBMZWZ0LmFwcGVuZENoaWxkKGdyaWQpO1xyXG5cclxuICAgICAgICBjb25zdCBwcmVwUmlnaHQgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwicHJlcC1yaWdodFwiKTtcclxuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwicmVtYWluaW5nXCIpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJjZWxsLXJlbWFpblwiKTtcclxuICAgICAgICAgICAgcmVtYWluaW5nLmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVhZHlCdG4gPSBjcmVhdGVDb21wKFwiYnV0dG9uXCIsIFwicmVhZHktYnRuXCIpO1xyXG4gICAgICAgIHJlYWR5QnRuLnRleHRDb250ZW50ID0gXCJSRUFEWVwiO1xyXG5cclxuICAgICAgICBwcmVwUmlnaHQuYXBwZW5kQ2hpbGQocmVtYWluaW5nKTtcclxuICAgICAgICBwcmVwUmlnaHQuYXBwZW5kQ2hpbGQocmVhZHlCdG4pO1xyXG5cclxuICAgICAgICBwcmVwQ29udGFpbmVyLmFwcGVuZENoaWxkKHByZXBMZWZ0KTtcclxuICAgICAgICBwcmVwQ29udGFpbmVyLmFwcGVuZENoaWxkKHByZXBSaWdodCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJmb290ZXJcIik7XHJcbiAgICAgICAgY29uc3QgZm9vdGVyVGV4dCA9IGNyZWF0ZUNvbXAoXCJwXCIpO1xyXG4gICAgICAgIGZvb3RlclRleHQudGV4dENvbnRlbnQgPSBcIk1hZGUgQnlcIjtcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBjcmVhdGVDb21wKFwiYVwiKTtcclxuICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcImh0dHBzOi8vZ2l0aHViLmNvbS93eWhvbmczMTAzXCIpO1xyXG4gICAgICAgIGNvbnN0IGdpdEh1YkltZyA9IGNyZWF0ZUNvbXAoXCJpbWdcIiwgXCJnaXRodWItc3ZnXCIpO1xyXG4gICAgICAgIGdpdEh1YkltZy5zcmMgPSBcIi4vYXNzZXRzL2dpdGh1Yi5zdmdcIjtcclxuICAgICAgICBjb25zdCBnaXRIdWJOYW1lID0gY3JlYXRlQ29tcChcInBcIik7XHJcbiAgICAgICAgZ2l0SHViTmFtZS50ZXh0Q29udGVudCA9IFwid3lob25nMzEwM1wiO1xyXG5cclxuICAgICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoZ2l0SHViSW1nKTtcclxuICAgICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoZ2l0SHViTmFtZSk7XHJcblxyXG4gICAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZChmb290ZXJUZXh0KTtcclxuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuXHJcblxyXG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQocHJlcENvbnRhaW5lcik7XHJcbiAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChmb290ZXIpO1xyXG5cclxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKG1haW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJhdHRsZVBhZ2UoKXtcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgY29uc3QgbWFpbiA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJtYWluXCIpOyAgICBcclxuXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBjcmVhdGVDb21wKFwiaDFcIiwgXCJ0aXRsZVwiKTtcclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IFwiQkFUVExFU0hJUFwiO1xyXG5cclxuICAgICAgICBjb25zdCBncmlkQ29udGFpbmVyID0gY3JlYXRlQ29tcChcImRpdlwiLCBcImdyaWQtY29udGFpbmVyXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBwbGF5ZXJHcmlkID0gY3JlYXRlQ29tcChcImRpdlwiLCBcInBsYXllci1ncmlkXCIpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKyl7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiY2VsbFwiKTtcclxuICAgICAgICAgICAgcGxheWVyR3JpZC5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9wcEdyaWQgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwib3BwLWdyaWRcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJjZWxsXCIpO1xyXG4gICAgICAgICAgICBvcHBHcmlkLmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBncmlkQ29udGFpbmVyLmFwcGVuZENoaWxkKHBsYXllckdyaWQpO1xyXG4gICAgICAgIGdyaWRDb250YWluZXIuYXBwZW5kQ2hpbGQob3BwR3JpZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdhbWVCdG5Db250YWluZXIgPSBjcmVhdGVDb21wKFwiZGl2XCIsIFwiZ2FtZS1idG4tY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNvbnN0IHJlc3RhcnRCdG4gPSBjcmVhdGVDb21wKFwiYnV0dG9uXCIsIFwicmVzdGFydC1idG5cIik7XHJcbiAgICAgICAgY29uc3QgZXhpdEJ0biA9IGNyZWF0ZUNvbXAoXCJidXR0b25cIiwgXCJleGl0LWJ0blwiKTtcclxuICAgICAgICByZXN0YXJ0QnRuLnRleHRDb250ZW50ID0gXCJSRVNUQVJUXCI7XHJcbiAgICAgICAgZXhpdEJ0bi50ZXh0Q29udGVudCA9IFwiRVhJVFwiO1xyXG5cclxuICAgICAgICBnYW1lQnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlc3RhcnRCdG4pO1xyXG4gICAgICAgIGdhbWVCdG5Db250YWluZXIuYXBwZW5kQ2hpbGQoZXhpdEJ0bik7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNyZWF0ZUNvbXAoXCJkaXZcIiwgXCJmb290ZXJcIik7XHJcbiAgICAgICAgY29uc3QgZm9vdGVyVGV4dCA9IGNyZWF0ZUNvbXAoXCJwXCIpO1xyXG4gICAgICAgIGZvb3RlclRleHQudGV4dENvbnRlbnQgPSBcIk1hZGUgQnlcIjtcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBjcmVhdGVDb21wKFwiYVwiKTtcclxuICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcImh0dHBzOi8vZ2l0aHViLmNvbS93eWhvbmczMTAzXCIpO1xyXG4gICAgICAgIGNvbnN0IGdpdEh1YkltZyA9IGNyZWF0ZUNvbXAoXCJpbWdcIiwgXCJnaXRodWItc3ZnXCIpO1xyXG4gICAgICAgIGdpdEh1YkltZy5zcmMgPSBcIi4vYXNzZXRzL2dpdGh1Yi5zdmdcIjtcclxuICAgICAgICBjb25zdCBnaXRIdWJOYW1lID0gY3JlYXRlQ29tcChcInBcIik7XHJcbiAgICAgICAgZ2l0SHViTmFtZS50ZXh0Q29udGVudCA9IFwid3lob25nMzEwM1wiO1xyXG5cclxuICAgICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoZ2l0SHViSW1nKTtcclxuICAgICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoZ2l0SHViTmFtZSk7XHJcblxyXG4gICAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZChmb290ZXJUZXh0KTtcclxuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuXHJcblxyXG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQoZ3JpZENvbnRhaW5lcik7XHJcbiAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChnYW1lQnRuQ29udGFpbmVyKTtcclxuICAgICAgICBtYWluLmFwcGVuZENoaWxkKGZvb3Rlcik7XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChtYWluKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHByZXBQYWdlLFxyXG4gICAgICAgIHBhaW50U3RvY2ssXHJcbiAgICAgICAgcGFpbnRCb2FyZCxcclxuICAgICAgICBwYWludEN1cnJlbnQsXHJcbiAgICAgICAgYWxsb3dTdGFydCxcclxuICAgICAgICBhZGRDdXJyZW50LFxyXG4gICAgICAgIGJhdHRsZVBhZ2UsXHJcbiAgICAgICAgcGFpbnRIaXQsXHJcbiAgICAgICAgZGlzcGxheU1zZ1xyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IERpc3BsYXk7IiwiaW1wb3J0IHsgc2VsZWN0Q29tcCwgc2VsZWN0Q29tcHMsIGNsZWFyRXZ0THN9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcclxuaW1wb3J0IERpc3BsYXkgZnJvbSBcIi4vZGlzcGxheVwiO1xyXG5cclxuY29uc3QgQ29udHJvbGxlciA9ICgoKSA9PiB7XHJcbiAgICBsZXQgcGxheWVyID0gbnVsbDtcclxuICAgIGxldCBvcHAgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvKlxyXG5cclxuICAgICAgICBQUkVQIEZVTkNTICYgVkFSSUFCTEVTXHJcblxyXG4gICAgKi9cclxuXHJcbiAgICAvLyBWYXJpYWJsZSBmb3IgcHJlcGFyYXRpb24gc3RhZ2VcclxuICAgIGxldCBzdG9ja3MgPSBbXTtcclxuICAgIGxldCBsaWZ0aW5nID0gLTE7XHJcbiAgICBsZXQgY2xpY2tzID0gMDtcclxuICAgIGxldCB0aW1lciA9IG51bGw7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNldExpZnQoKXtcclxuICAgICAgICBjb25zdCBjZWxscyA9IHNlbGVjdENvbXBzKFwiLmNlbGxcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb29wLWZ1bmNcclxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwID0gcGxheWVyLmdhbWVib2FyZC5nZXRTaGlwKGxpZnRpbmcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nYW1lYm9hcmQuc2hpcEF0KE1hdGguZmxvb3IoaS8xMCksIGkgJSAxMCkgPT09IC0xICYmIFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuaXNWYWxpZFBsYWNlbWVudChzaGlwLnNoaXBMZW5ndGgsIE1hdGguZmxvb3IoaS8xMCksIGklMTAsIHNoaXAuZ2V0SG9yKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLnNoaXBMZW5ndGgsIE1hdGguZmxvb3IoaS8xMCksIGklMTAsIHNoaXAuZ2V0SG9yKCksIGxpZnRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwLmdldEhvcigpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXAuc2hpcExlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2kral0uY2xhc3NMaXN0LmFkZChgYmxvY2ske3NoaXAuc2hpcExlbmd0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwLnNoaXBMZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1tpKyhqKjEwKV0uY2xhc3NMaXN0LmFkZChgYmxvY2ske3NoaXAuc2hpcExlbmd0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jXHJcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwID0gcGxheWVyLmdhbWVib2FyZC5nZXRTaGlwKGxpZnRpbmcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nYW1lYm9hcmQuc2hpcEF0KE1hdGguZmxvb3IoaS8xMCksIGkgJSAxMCkgPT09IGxpZnRpbmcpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQudW5wbGFjZVNoaXAobGlmdGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXAuZ2V0SG9yKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcC5zaGlwTGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNbaStqXS5jbGFzc0xpc3QucmVtb3ZlKGBibG9jayR7c2hpcC5zaGlwTGVuZ3RofWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXAuc2hpcExlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2krKGoqMTApXS5jbGFzc0xpc3QucmVtb3ZlKGBibG9jayR7c2hpcC5zaGlwTGVuZ3RofWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jXHJcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmdhbWVib2FyZC5zaGlwQXQoTWF0aC5mbG9vcihpLzEwKSwgaSAlIDEwKSA9PT0gbGlmdGluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlmdGluZyA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIERpc3BsYXkucGFpbnRCb2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcclxuICAgICAgICAgICAgICAgICAgICBzZXRQcmVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRQcmVwKCl7XHJcbiAgICAgICAgY29uc3QgY2VsbHMgPSBzZWxlY3RDb21wcyhcIi5jZWxsXCIpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jXHJcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmdhbWVib2FyZC5zaGlwQXQoTWF0aC5mbG9vcihpLzEwKSwgaSAlIDEwKSAhPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGlwSUQgPSBwbGF5ZXIuZ2FtZWJvYXJkLnNoaXBBdChNYXRoLmZsb29yKGkvMTApLCBpICUxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdldFNoaXAoc2hpcElEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC51bnBsYWNlU2hpcChzaGlwSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmdhbWVib2FyZC5pc1ZhbGlkUGxhY2VtZW50KHNoaXAuc2hpcExlbmd0aCwgc2hpcC5nZXRIZWFkKClbMF0sIHNoaXAuZ2V0SGVhZCgpWzFdLCAhc2hpcC5nZXRIb3IoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcC5zaGlwTGVuZ3RoLCBzaGlwLmdldEhlYWQoKVswXSwgc2hpcC5nZXRIZWFkKClbMV0sICFzaGlwLmdldEhvcigpLCBzaGlwSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxheS5wYWludEJvYXJkKHBsYXllci5nYW1lYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJlcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAuc2hpcExlbmd0aCwgc2hpcC5nZXRIZWFkKClbMF0sIHNoaXAuZ2V0SGVhZCgpWzFdLCBzaGlwLmdldEhvcigpLCBzaGlwSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpZnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5nYW1lYm9hcmQuc2hpcEF0KE1hdGguZmxvb3IoaS8xMCksIGkgJSAxMCkgIT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5zZXQgdGhpcyBzaGlwLCBzdGFydCBsaWZ0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZnRpbmcgPSBwbGF5ZXIuZ2FtZWJvYXJkLnNoaXBBdChNYXRoLmZsb29yKGkvMTApLCBpICUgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLnVucGxhY2VTaGlwKHBsYXllci5nYW1lYm9hcmQuc2hpcEF0KE1hdGguZmxvb3IoaS8xMCksIGkgJSAxMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5LnBhaW50Qm9hcmQocGxheWVyLmdhbWVib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2xpY2tzICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNsaWNrcyA9PT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlja3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAyMDBcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0U3RhcnRCdG4oKXtcclxuICAgICAgICBjb25zdCBzdGFydEJ0biA9IHNlbGVjdENvbXAoXCIuc3RhcnQtYnRuXCIpO1xyXG4gICAgICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGluaXRCYXR0bGUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldEN1cnJlbnQoKXtcclxuICAgICAgICBjb25zdCBkb25lQnRuID0gc2VsZWN0Q29tcChcIi5kb25lLWJ0blwiKTtcclxuICAgICAgICBkb25lQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICBpZiAobGlmdGluZyA9PT0gLTEgJiYgc3RvY2tzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgbGlmdGluZyA9IDUtc3RvY2tzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMZW5ndGggPSBzdG9ja3Nbc3RvY2tzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQubmV3U2hpcChjdXJyZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHN0b2Nrcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIERpc3BsYXkucGFpbnRDdXJyZW50KGN1cnJlbnRMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgRGlzcGxheS5wYWludFN0b2NrKHN0b2Nrcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXRQcmVwIG1pZ2h0IGdldCB0cmlnZ2VyLCB3ZSBuZWVkIHRvIGNsZWFyIGl0IVxyXG4gICAgICAgICAgICAgICAgY2xlYXJFdnRMcyhcIi5ncmlkIC5jZWxsXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgc2V0TGlmdCgpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZiAoc3RvY2tzLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5LmFsbG93U3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIHNldFN0YXJ0QnRuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRTdGFydFVwKCl7XHJcbiAgICAgICAgY29uc3QgcmVhZHlCdG4gPSBzZWxlY3RDb21wKFwiLnJlYWR5LWJ0blwiKTtcclxuICAgICAgICByZWFkeUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBEaXNwbGF5LmFkZEN1cnJlbnQoKTtcclxuICAgICAgICAgICAgc2V0Q3VycmVudCgpO1xyXG4gICAgICAgICAgICBsaWZ0aW5nID0gMDtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudExlbmd0aCA9IDU7XHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQubmV3U2hpcChjdXJyZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgc3RvY2tzLnBvcCgpO1xyXG4gICAgICAgICAgICBEaXNwbGF5LnBhaW50Q3VycmVudChjdXJyZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgRGlzcGxheS5wYWludFN0b2NrKHN0b2Nrcyk7XHJcbiAgICAgICAgICAgIHNldExpZnQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRQcmVwKCl7XHJcbiAgICAgICAgcGxheWVyID0gUGxheWVyKCk7XHJcbiAgICAgICAgb3BwID0gUGxheWVyKCk7XHJcbiAgICAgICAgc3RvY2tzID0gWzIsIDMsIDMsIDQsIDVdO1xyXG4gICAgICAgIERpc3BsYXkucHJlcFBhZ2UoKTtcclxuICAgICAgICBEaXNwbGF5LnBhaW50U3RvY2soc3RvY2tzKTtcclxuICAgICAgICBEaXNwbGF5LnBhaW50Qm9hcmQocGxheWVyLmdhbWVib2FyZCk7XHJcbiAgICAgICAgc2V0U3RhcnRVcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcblxyXG4gICAgICAgIEJBVFRMRSBGVU5DUyAmIFZBUklBQkxFU1xyXG5cclxuICAgICovXHJcbiAgIGxldCB0dXJuID0gMDtcclxuXHJcbiAgIGZ1bmN0aW9uIHNldE1zZygpe1xyXG4gICAgICAgIGNvbnN0IG9rQnRuID0gc2VsZWN0Q29tcChcIi5vay1idG5cIik7XHJcbiAgICAgICAgb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHNlbGVjdENvbXAoXCIjY29udGVudFwiKTtcclxuICAgICAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChjb250ZW50Lmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoY29udGVudC5sYXN0Q2hpbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZW5kR2FtZSh3aW5uZXIpe1xyXG4gICAgICAgIGNsZWFyRXZ0THMoXCIucGxheWVyLWdyaWQgLmNlbGxcIiwgdHJ1ZSk7XHJcbiAgICAgICAgY2xlYXJFdnRMcyhcIi5vcHAtZ3JpZCAuY2VsbFwiLCB0cnVlKTtcclxuICAgICAgICBEaXNwbGF5LmRpc3BsYXlNc2coYCR7d2lubmVyID09PSAxID8gXCJQbGF5ZXJcIiA6IFwiQUlcIn0gaGF2ZSB3b24gdGhlIGdhbWUhIFByZXNzIHJlc3RhcnQgaWYgeW91IHdpc2ggdG8gcmVzdGFydCB0aGUgZ2FtZSB3aXRoIGN1cnJlbnQgc2V0dGluZy4gT3RoZXJ3aXNlLCBleGl0LmApO1xyXG4gICAgICAgIHNldE1zZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9wcEF0dGFja0NlbGwoKXtcclxuICAgICAgICBjb25zdCByZXMgPSBvcHAucmFuZG9tQXR0YWNrKHBsYXllci5nYW1lYm9hcmQpO1xyXG4gICAgICAgIGlmIChyZXNbMl0gPT09IDEpIHtcclxuICAgICAgICAgICAgRGlzcGxheS5wYWludEhpdCgtMSwgKHJlc1swXSoxMCkrcmVzWzFdLCByZXNbMl0sIDEpO1xyXG4gICAgICAgIH1lbHNlIGlmIChyZXNbMl0gPj0gMil7XHJcbiAgICAgICAgICAgIERpc3BsYXkucGFpbnRIaXQocGxheWVyLmdhbWVib2FyZC5nZXRTaGlwKHBsYXllci5nYW1lYm9hcmQuc2hpcEF0KHJlc1swXSxyZXNbMV0pKSwgKHJlc1swXSoxMCkrcmVzWzFdLCByZXNbMl0sIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0dXJuID0gMDtcclxuICAgICAgICBpZiAocGxheWVyLmdhbWVib2FyZC5pc0dhbWVPdmVyKCkpe1xyXG4gICAgICAgICAgICBlbmRHYW1lKDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRCYXR0bGVDZWxscygpe1xyXG4gICAgICAgIGNvbnN0IG9wcENlbGxzID0gc2VsZWN0Q29tcHMoXCIub3BwLWdyaWQgLmNlbGxcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG9wcENlbGxzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvb3AtZnVuY1xyXG4gICAgICAgICAgICBvcHBDZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR1cm4gPT09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9wcC5nYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhNYXRoLmZsb29yKGkvMTApLCBpJTEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYXkucGFpbnRIaXQoLTEsIGksIHJlc3VsdCwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmIChyZXN1bHQgPj0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5LnBhaW50SGl0KG9wcC5nYW1lYm9hcmQuZ2V0U2hpcChvcHAuZ2FtZWJvYXJkLnNoaXBBdChNYXRoLmZsb29yKGkvMTApLCBpICUgMTApKSwgaSwgcmVzdWx0LCAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dXJuID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wcC5nYW1lYm9hcmQuaXNHYW1lT3ZlcigpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEdhbWUoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BwQXR0YWNrQ2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgZnVuY3Rpb24gcmVzdGFydEdhbWUoKXtcclxuICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLnJlc3RhcnRCb2FyZCgpO1xyXG4gICAgICAgIG9wcCA9IFBsYXllcigpO1xyXG4gICAgICAgIERpc3BsYXkuYmF0dGxlUGFnZSgpO1xyXG4gICAgICAgIG9wcC5nZW5lcmF0ZVJhbmRvbVNoaXAoKTtcclxuICAgICAgICBEaXNwbGF5LnBhaW50Qm9hcmQocGxheWVyLmdhbWVib2FyZCwgMSk7XHJcbiAgICAgICAgc2V0QmF0dGxlQ2VsbHMoKTtcclxuICAgICAgICBzZXRHYW1lQnRucygpO1xyXG4gICB9XHJcblxyXG5cclxuICAgZnVuY3Rpb24gc2V0R2FtZUJ0bnMoKXtcclxuICAgICAgICBjb25zdCByZXN0YXJ0QnRuID0gc2VsZWN0Q29tcChcIi5yZXN0YXJ0LWJ0blwiKTtcclxuICAgICAgICByZXN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3RhcnRHYW1lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgZXhpdEJ0biA9IHNlbGVjdENvbXAoXCIuZXhpdC1idG5cIik7XHJcbiAgICAgICAgZXhpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpbml0UHJlcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdEJhdHRsZSgpe1xyXG4gICAgICAgIERpc3BsYXkuYmF0dGxlUGFnZSgpO1xyXG4gICAgICAgIG9wcC5nZW5lcmF0ZVJhbmRvbVNoaXAoKTtcclxuICAgICAgICBEaXNwbGF5LnBhaW50Qm9hcmQocGxheWVyLmdhbWVib2FyZCwgMSk7XHJcbiAgICAgICAgc2V0QmF0dGxlQ2VsbHMoKTtcclxuICAgICAgICBzZXRHYW1lQnRucygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKXtcclxuICAgICAgICBpbml0UHJlcCgpO1xyXG4gICAgICAgIERpc3BsYXkuZGlzcGxheU1zZyhcIldlbGNvbWUgdG8gQkFUVExFU0hJUCEgUGxhY2UgeW91ciBzaGlwcyBhbmQgcmVhZHkgZm9yIHdhciEgQ2xpY2sgdGhlIHNoaXAgb25lIHRpbWUgdG8gcmVsb2NhdGUgaXQhIERvdWJsZSBjbGljayBpdCB0byByb3RhdGUgaXQhXCIpO1xyXG4gICAgICAgIHNldE1zZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybntcclxuICAgICAgICBpbml0XHJcbiAgICB9XHJcbn0pKCk7ICAgIFxyXG5cclxuQ29udHJvbGxlci5pbml0KCk7XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDb21wIiwidHlwZSIsImNscyIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZWxlY3RDb21wIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0Q29tcHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xlYXJFdnRMcyIsImdyb3VwIiwiY29tcHMiLCJpIiwibGVuZ3RoIiwib2xkQ29tcCIsIm5ld0NvbXAiLCJjbG9uZU5vZGUiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwiY29tcCIsInNoaXBMZW5ndGgiLCJoZWFkIiwiaXNIb3Jpem9udGFsIiwidG90YWxIaXRzIiwic2hpcEhlYWQiLCJpc0hvciIsImhpdCIsImlzU3VuayIsInNldEhlYWQiLCJuZXdIZWFkIiwiZ2V0SGVhZCIsInNldEhvciIsImlzSG9yaSIsImdldEhvciIsImdhbWVib2FyZCIsImdyaWQiLCJoaXRHcmlkIiwic2hpcHMiLCJzaGlwc1JlbWFpbmluZyIsImlzSW52YWxpZENvb3JkIiwicm93IiwiY29sIiwiaXNJbnZhbGlkU2hpcCIsImZyb21Sb3ciLCJmcm9tQ29sIiwidG9Sb3ciLCJ0b0NvbCIsImRyIiwiZGMiLCJqIiwiaXNFbXB0eSIsInZhbGlkIiwiaXNWYWxpZFBsYWNlbWVudCIsInRlbXAiLCJwdXNoIiwiZ2VuZXJhdGVHcmlkIiwicGxhY2VTaGlwIiwiaWQiLCJzaGlwSUQiLCJyZWNlaXZlQXR0YWNrIiwiaXNHYW1lT3ZlciIsInNoaXBBdCIsImdldFNoaXAiLCJ1bnBsYWNlU2hpcCIsIm5ld1NoaXAiLCJyZXN0YXJ0Qm9hcmQiLCJuZXdTaGlwcyIsImN1cnJlbnRBdHRhY2siLCJhdHRhY2tPcmRlciIsImZvdW5kIiwicXVldWUiLCJhcnJheSIsInJhbmRvbUluZGV4IiwiY3VycmVudEluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic2h1ZmZsZSIsImdlbmVyYXRlQXR0YWNrT3JkZXIiLCJnZW5lcmF0ZUhpdEdyaWQiLCJyYW5kb21BdHRhY2siLCJvcHBCb2FyZCIsInJlcyIsInRvQXR0YWNrIiwic2hpZnQiLCJwb3AiLCJyb3dBdCIsImNvbEF0Iiwic2hpcCIsImNvdmVySW1wb3NzaWJsZSIsImdlbmVyYXRlUmFuZG9tU2hpcCIsImN1cnJlbnRMZW5ndGgiLCJEaXNwbGF5IiwiY29udGVudCIsInByZXBQYWdlIiwiaW5uZXJIVE1MIiwibWFpbiIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJwcmVwQ29udGFpbmVyIiwicHJlcExlZnQiLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCJwcmVwUmlnaHQiLCJyZW1haW5pbmciLCJyZWFkeUJ0biIsImZvb3RlciIsImZvb3RlclRleHQiLCJhbmNob3IiLCJzZXRBdHRyaWJ1dGUiLCJnaXRIdWJJbWciLCJzcmMiLCJnaXRIdWJOYW1lIiwicGFpbnRTdG9jayIsInJlbWFpbiIsInJlc2V0U3RvY2tDZWxscyIsImNlbGxzIiwicGFpbnRCb2FyZCIsImdyaWROdW1iZXIiLCJyZXNldEdyaWRDZWxscyIsInBhaW50Q3VycmVudCIsImN1cnJlbnQiLCJyZXNldEN1cnJlbnQiLCJhbGxvd1N0YXJ0Iiwic3RhcnRCdG4iLCJhZGRDdXJyZW50IiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJjdXJyZW50Q29udGFpbmVyIiwiY3VycmVudFRleHQiLCJkb25lQnRuIiwiZG9uZUltZyIsImJhdHRsZVBhZ2UiLCJncmlkQ29udGFpbmVyIiwicGxheWVyR3JpZCIsIm9wcEdyaWQiLCJnYW1lQnRuQ29udGFpbmVyIiwicmVzdGFydEJ0biIsImV4aXRCdG4iLCJwYWludEhpdCIsImF0IiwiaGl0VHlwZSIsInN1bmtTaGlwIiwiZGlzcGxheU1zZyIsIm1lc3NhZ2UiLCJiZ0NvbnRhaW5lciIsImhpZGVCZyIsIm1zZ0NvbnRhaW5lciIsIm1zZ0JveCIsIm1zZyIsIm9rQnRuIiwiQ29udHJvbGxlciIsInBsYXllciIsIm9wcCIsInN0b2NrcyIsImxpZnRpbmciLCJjbGlja3MiLCJ0aW1lciIsInNldExpZnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwic2V0UHJlcCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJyb3RhdGUiLCJzZXRTdGFydEJ0biIsInNldEJhdHRsZUNlbGxzIiwic2V0R2FtZUJ0bnMiLCJpbml0UHJlcCIsInR1cm4iLCJzZXRNc2ciLCJlbmRHYW1lIiwid2lubmVyIiwib3BwQXR0YWNrQ2VsbCIsIm9wcENlbGxzIiwicmVzdWx0IiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=